# –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (NotificationSystem)

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã:

- **–ö–æ–Ω—Å–æ–ª—å** - –≤—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
- **–õ–æ–≥–∏** - –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤
- **Email** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç–µ
- **Webhook** - –æ—Ç–ø—Ä–∞–≤–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **–§–∞–π–ª** - –∑–∞–ø–∏—Å—å –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª

#### –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

- `TASK_STARTED` - –Ω–∞—á–∞–ª–æ –∑–∞–¥–∞—á–∏
- `TASK_PROGRESS` - –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `TASK_COMPLETED` - —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- `TASK_FAILED` - –ø—Ä–æ–≤–∞–ª –∑–∞–¥–∞—á–∏
- `STEP_STARTED` - –Ω–∞—á–∞–ª–æ —à–∞–≥–∞
- `STEP_COMPLETED` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —à–∞–≥–∞
- `STEP_FAILED` - –ø—Ä–æ–≤–∞–ª —à–∞–≥–∞
- `ERROR_ESCALATION` - —ç—Å–∫–∞–ª–∞—Ü–∏—è –æ—à–∏–±–æ–∫
- `HUMAN_ESCALATION` - —ç—Å–∫–∞–ª–∞—Ü–∏—è –∫ —á–µ–ª–æ–≤–µ–∫—É
- `AUTOCORRECTION` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏–∏
- `SYSTEM_STATUS` - —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

### 2. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á–µ—Ç–æ–≤ (ReportGenerator)

–°–æ–∑–¥–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:

- **JSON** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **HTML** - –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **Markdown** - –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown
- **CSV** - —Ç–∞–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **TEXT** - –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç

#### –¢–∏–ø—ã –æ—Ç—á–µ—Ç–æ–≤

- `TASK_SUMMARY` - —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –∑–∞–¥–∞—á–µ
- `STEP_DETAILS` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ —à–∞–≥—É
- `ERROR_ANALYSIS` - –∞–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫
- `PERFORMANCE` - –æ—Ç—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `TIMELINE` - –≤—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞
- `FULL_REPORT` - –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç

### 3. –¢—Ä–µ–∫–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª—ã (TimelineTracker)

–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á:

- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–æ–≤
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏–∏
- –≠—Å–∫–∞–ª–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```yaml
user_feedback:
  enabled: true
  log_level: "INFO"
  
  notifications:
    enabled: true
    console:
      enabled: true
    log:
      enabled: true
    email:
      enabled: false
      smtp_server: "smtp.gmail.com"
      smtp_port: 587
      username: "your-email@gmail.com"
      password: "your-password"
      from_address: "your-email@gmail.com"
      to_addresses: ["admin@company.com"]
    webhook:
      enabled: false
      url: "https://hooks.slack.com/services/..."
      headers: {}
      timeout: 30
    file:
      enabled: true
      file_path: "notifications.log"
  
  reports:
    enabled: true
    output_dir: "reports"
    formats: ["json", "html", "markdown"]
    include_timeline: true
    include_performance: true
    include_error_analysis: true
  
  timeline:
    enabled: true
    auto_create_segments: true
    max_events_per_task: 1000
    enable_performance_analysis: true
    export_dir: "timeline_exports"
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```python
from src.utils.user_feedback_system import UserFeedbackSystem, FeedbackConfig

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
config = FeedbackConfig(
    notifications={
        "enabled": True,
        "console": {"enabled": True},
        "log": {"enabled": True}
    },
    reports={
        "enabled": True,
        "output_dir": "reports",
        "formats": ["json", "html"]
    },
    timeline={
        "enabled": True,
        "auto_create_segments": True
    }
)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
feedback_system = UserFeedbackSystem(config)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞—á

```python
# –ù–∞—á–∞–ª–æ –∑–∞–¥–∞—á–∏
task.mark_started()
feedback_system.on_task_started(task)

# –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–¥–∞—á–∏
feedback_system.on_task_progress(task, completed_steps, current_step)

# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
if success:
    feedback_system.on_task_completed(task, execution_results)
else:
    feedback_system.on_task_failed(task, failure_reason, execution_results)

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–∞
step.mark_started()
feedback_system.on_step_started(task, step)

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
feedback_system.on_command_executed(
    task_id=task.task_id,
    step_id=step.step_id,
    command=command,
    success=success,
    duration=duration,
    output=output,
    error=error
)

# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —à–∞–≥–∞
feedback_system.on_step_completed(task, step, duration)
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –ø–æ –∑–∞–¥–∞—á–µ
report = feedback_system.generate_task_report(task, execution_results)

# –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞
exported_files = feedback_system.report_generator.export_report(report)
print(f"–û—Ç—á–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω: {exported_files}")

# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –ø–æ —à–∞–≥—É
step_report = feedback_system.generate_step_report(task, step_id, step_results)
```

### –†–∞–±–æ—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª–æ–π

```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª—ã –∑–∞–¥–∞—á–∏
timeline = feedback_system.get_task_timeline(task.task_id)

# –≠–∫—Å–ø–æ—Ä—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª—ã
timeline_file = feedback_system.export_task_timeline(task.task_id, "json")

# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
performance = feedback_system.timeline_tracker.analyze_performance(task.task_id)
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```python
# –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
notifications = feedback_system.get_notification_history(hours=24)

# –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
status = feedback_system.get_system_status()
print(f"–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: {status['notifications']['notifications_sent']}")
```

## –®–∞–±–ª–æ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

### –®–∞–±–ª–æ–Ω –Ω–∞—á–∞–ª–∞ –∑–∞–¥–∞—á–∏

```
üöÄ –ó–∞–¥–∞—á–∞ –Ω–∞—á–∞—Ç–∞: {task_title}

–ó–∞–¥–∞—á–∞ '{task_title}' –Ω–∞—á–∞—Ç–∞.
ID –∑–∞–¥–∞—á–∏: {task_id}
–û–ø–∏—Å–∞–Ω–∏–µ: {task_description}
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤: {total_steps}
–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞: {start_time}
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: {priority}
```

### –®–∞–±–ª–æ–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

```
‚úÖ –ó–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: {task_title}

–ó–∞–¥–∞—á–∞ '{task_title}' —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
ID –∑–∞–¥–∞—á–∏: {task_id}
–û–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: {total_duration}
–í—ã–ø–æ–ª–Ω–µ–Ω–æ —à–∞–≥–æ–≤: {completed_steps}/{total_steps}
–û—à–∏–±–æ–∫: {error_count}
–í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: {completion_time}
```

### –®–∞–±–ª–æ–Ω —ç—Å–∫–∞–ª–∞—Ü–∏–∏ –∫ —á–µ–ª–æ–≤–µ–∫—É

```
üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –≠–°–ö–ê–õ–ê–¶–ò–Ø: {step_title}

–¢–†–ï–ë–£–ï–¢–°–Ø –í–ú–ï–®–ê–¢–ï–õ–¨–°–¢–í–û –ß–ï–õ–û–í–ï–ö–ê!
–®–∞–≥ '{step_title}' —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è.
ID —à–∞–≥–∞: {step_id}
ID –∑–∞–¥–∞—á–∏: {task_id}
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫: {error_count}
–ü—Ä–∏—á–∏–Ω–∞: {escalation_reason}
–í—Ä–µ–º—è —ç—Å–∫–∞–ª–∞—Ü–∏–∏: {escalation_time}
–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏:
{recent_errors}
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º—É –∏ –ø—Ä–∏–º–∏—Ç–µ –º–µ—Ä—ã
```

## –§–æ—Ä–º–∞—Ç—ã –æ—Ç—á–µ—Ç–æ–≤

### JSON –æ—Ç—á–µ—Ç

```json
{
  "report_id": "task_summary_demo_task_001_1234567890",
  "report_type": "task_summary",
  "task_id": "demo_task_001",
  "title": "–°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –∑–∞–¥–∞—á–µ: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞",
  "created_at": "2024-01-15T10:30:00",
  "sections": [
    {
      "section_id": "task_overview",
      "title": "–û–±–∑–æ—Ä –∑–∞–¥–∞—á–∏",
      "content": "# –û–±–∑–æ—Ä –∑–∞–¥–∞—á–∏\n\n**ID –∑–∞–¥–∞—á–∏:** demo_task_001\n...",
      "order": 1
    }
  ]
}
```

### HTML –æ—Ç—á–µ—Ç

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>–°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –∑–∞–¥–∞—á–µ: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        h1 { color: #333; }
        h2 { color: #666; border-bottom: 1px solid #ccc; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>–°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –∑–∞–¥–∞—á–µ: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞</h1>
    <div class="metadata">
        <p><strong>ID –æ—Ç—á–µ—Ç–∞:</strong> task_summary_demo_task_001_1234567890</p>
        <p><strong>–¢–∏–ø –æ—Ç—á–µ—Ç–∞:</strong> task_summary</p>
        <p><strong>ID –∑–∞–¥–∞—á–∏:</strong> demo_task_001</p>
        <p><strong>–°–æ–∑–¥–∞–Ω:</strong> 2024-01-15 10:30:00</p>
    </div>
    <h2>–û–±–∑–æ—Ä –∑–∞–¥–∞—á–∏</h2>
    <div>...</div>
</body>
</html>
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```python
stats = feedback_system.notification_system.get_stats()
print(f"–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: {stats['notifications_sent']}")
print(f"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ —Ç–∏–ø–∞–º: {stats['notifications_by_type']}")
print(f"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º: {stats['notifications_by_priority']}")
```

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```python
performance = feedback_system.timeline_tracker.analyze_performance(task.task_id)
print(f"–û–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: {performance['total_duration']} —Å–µ–∫")
print(f"–£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥: {performance['command_stats']['success_rate']:.1f}%")
print(f"–£—Å–ø–µ—à–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤: {performance['step_stats']['success_rate']:.1f}%")
```

## –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```python
# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 –¥–Ω–µ–π)
feedback_system.cleanup_old_data(days=30)

# –û—á–∏—Å—Ç–∫–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
feedback_system.notification_system.cleanup_old_notifications(days=7)
feedback_system.report_generator.cleanup_old_reports(days=14)
feedback_system.timeline_tracker.cleanup_old_events(days=30)
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä

```python
from src.utils.user_feedback_system import UserFeedbackSystem, FeedbackConfig
from src.models.planning_model import Task, TaskStep, Priority

# –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
task = Task(
    task_id="example_task",
    title="–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞",
    description="–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx",
    priority=Priority.HIGH
)

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–æ–≤
step = TaskStep(
    step_id="step_1",
    title="–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx",
    description="–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ Nginx"
)
task.add_step(step)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
config = FeedbackConfig(
    notifications={"enabled": True, "console": {"enabled": True}},
    reports={"enabled": True, "output_dir": "reports"},
    timeline={"enabled": True}
)
feedback_system = UserFeedbackSystem(config)

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é
task.mark_started()
feedback_system.on_task_started(task)

step.mark_started()
feedback_system.on_step_started(task, step)

# –°–∏–º—É–ª—è—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
feedback_system.on_command_executed(
    task_id=task.task_id,
    step_id=step.step_id,
    command="apt install nginx -y",
    success=True,
    duration=15.5,
    output="Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ"
)

step.mark_completed()
feedback_system.on_step_completed(task, step, 15.5)

task.mark_completed()
feedback_system.on_task_completed(task, {"successful_commands": 1})

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
report = feedback_system.generate_task_report(task, {})
exported_files = feedback_system.report_generator.export_report(report)
print(f"–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: {exported_files}")
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```python
from src.utils.notification_system import NotificationType, NotificationTemplate

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
class CustomNotificationType(NotificationType):
    CUSTOM_EVENT = "custom_event"

# –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
template = NotificationTemplate(
    template_id="custom_event",
    notification_type=CustomNotificationType.CUSTOM_EVENT,
    priority=NotificationPriority.MEDIUM,
    title_template="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ: {event_name}",
    message_template="–û–ø–∏—Å–∞–Ω–∏–µ: {event_description}",
    channels=[NotificationChannel.CONSOLE, NotificationChannel.LOG]
)

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–∞
notification_system.templates[template.template_id] = template
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç—á–µ—Ç–∞

```python
from src.utils.report_generator import ReportFormat

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
class CustomReportFormat(ReportFormat):
    XML = "xml"

# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞
def _export_to_xml(self, report: DetailedReport, file_path: Path):
    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ XML
    pass
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**: –í–∫–ª—é—á–∏—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–∞–Ω–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
2. **–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
4. **–®–∞–±–ª–æ–Ω—ã**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —à–∞–±–ª–æ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã
5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –≤ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª–µ
6. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP —Å–µ—Ä–≤–µ—Ä–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π—Ä–≤–æ–ª–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL webhook
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

- –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –≤ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª–µ
- –û—Ç–∫–ª—é—á–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ü—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç—á–µ—Ç–∞–º–∏

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –æ—Ç—á–µ—Ç–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç—á–µ—Ç–∞—Ö
